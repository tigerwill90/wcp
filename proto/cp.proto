syntax = "proto3";

package proto;

import "google/protobuf/empty.proto";

option go_package = "github.com/tigerwill90/webcb/proto";

message Clipboard {
  bytes uuid = 1;
  bytes payload = 2;
  bytes hash = 3;
  int64 size = 4;
}

message PasteOption {
  int64 length = 1;
}

message Payload {
  message Info {
    // TODO remove this
    bytes uuid = 1;
    int64 ttl = 2;
  }

  oneof data {
    Info info = 1;
    bytes chunk = 2;
    bytes hash = 3;
  }
}

service WebClipboard {
  rpc Copy (stream Payload) returns (google.protobuf.Empty) {}
  rpc Paste (PasteOption) returns (stream Payload) {}
}